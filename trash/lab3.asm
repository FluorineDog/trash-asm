	EXTRN	STUBUF:BYTE
	PUBLIC	FUN3
.386
MAX_NUM EQU 5
LENGTH_UNIT	EQU 20
DATA2	SEGMENT	USE16
GRADELIST	DB	MAX_NUM DUP(0)
DATA2	ENDS
STACK	SEGMENT USE16 STACK
		DB 500 DUP(0)
STACK	ENDS

CODE	SEGMENT	USE16	
	ASSUME	ES:DATA2,CS:CODE,SS:STACK
FUN3	PROC	far
		PUSHF
		PUSH	AX
		PUSH	BX
		PUSH	SI
		PUSH	BP
		PUSH	CX
		PUSH	DX
		PUSH	DI
		MOV	AX,DATA2
		MOV	ES,AX
		XOR	AX,AX
		XOR	CX,CX
		MOV	SI,OFFSET STUBUF
L:
		MOV	AL,[SI+18]
		MOV	GRADELIST,AL
		ADD	SI,20
		INC	CX
		CMP	CX,MAX_NUM
		JB	L
		XOR	SI,SI
SORT:
		MOV	AL,[GRADELIST+SI]
		MOV	BL,[GRADELIST+SI+1]
		CMP	AL,BL
		JB	EXCHANGE
		JMP	IGNORE
EXCHANGE:
		MOV	[GRADELIST+SI],BL
		MOV	[GRADELIST+SI+1],AL
IGNORE:
		INC	SI
		CMP	SI,MAX_NUM
		JB	SORT
SOLVE:
		XOR	CX,CX
		XOR	BP,BP
		MOV	CX,MAX_NUM
L1:
		XOR	SI,SI
L2:		MOV	AL,[SI+GRADELIST]
		MOV	DI,18
		MOV	BL,BYTE PTR ds:STUBUF[BP+DI]
		CMP	BL,AL
		JE	L3
		INC	SI
		JMP	L2
L3:		
		MOV	DX,SI
		INC	DX
		INC	DI
		MOV	BYTE PTR ds:STUBUF[BP+DI],DL
		ADD	BP,20
		DEC	CX
		JNZ	L1

		POP	DI
		POP	DX
		POP	CX
		POP	BP
		POP	SI
		POP	BX
		POP	AX
		POPF
		RET
FUN3	ENDP
CODE	ENDS
		END
